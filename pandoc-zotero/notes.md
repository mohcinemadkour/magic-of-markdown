---
title: Getting Zotero to work with Pandoc
author: Ted Laderas
bibliography: notes.bib
csl: test.csl
---

This is a short help file describing how to get the Zotero reference manager with pandoc and Markdown files. Zotero does this by using the BetterBibTex plugin. With this combination, you can use simple cite keys like `[@fabregat_reactome_2016-1]` that are generated by Zotero to refer to papers. Then you can just run pandoc with a special option to process your cite keys into the citation format that you want. No fuss, no muss.

Here is one reference citing the Reactome Project.[@fabregat_reactome_2016-1]
Here is a reference citing a paper on Boolean Networks.[@anderson_boolean_2016]

Flux Balance Analysis[@orth_what_2010]

## The Setup Steps:

1) Install Zotero and build your library using the web plugin.
2) Install BetterBibTex for Zotero: https://github.com/retorquere/zotero-better-bibtex/wiki/Installation
3) Install pandoc if you haven't already.
4) Configure Zotero's export format. From **Preferences >> Export** choose "BetterBibTex Quick Copy"
5) Under **Preferences >> BetterBibTex** - change quick copy format to "Pandoc" and check the "Surround Pandoc citations with brackets" checkbox.
6) Export all your references to a .bib file. Right-click on your library and choose "Export Library". Make sure to export it into "BetterBibTex" format. You can export your entire library, or a separate folder. Clicking "Keep Updated" will keep this file up to date as you add more references. If your references are in a separate collection, you can right-click that folder and use "Export Collection". I keep mine in my Box folder in a "zotero" folder so it is easily accessible.
7) Find your Citation Style Language file for your journal and save it to an easily accessible location. I do the same as step 6 for my CSL files.

## When you're ready to cite stuff in a Markdown file:

Okay, that was a little bit of setup. But you only have to do it once! Once you have your .bib file setup and updated, the rest is a snap.

8) Copy your citation tags into your markdown file by selecting an entry in Zotero and using CMD + Shift + C (Mac) or Ctrl + Shift + C (Windows/Linux). Paste into your markdown document.
9) Run Pandoc to process your citations using the `--filter pandoc-citeproc` flag. Here we output `notes.md` to `notes.docx` in the same directory, with our .bib file and .csl files in the same directory:

`pandoc --filter pandoc-citeproc notes.md -o notes.docx --bibliography=notes.bib --csl=test.csl`

## Optional: Setting up a small YAML entry to simplify the conversion process.

Optionally, you can configure the location of your .bib and .csl files by adding a small YAML entry at the beginning of your Markdown document. This makes running pandoc a little easier. Also, the citations can be processed within the Rstudio version of pandoc. 

```
---
title: Research Notes
author: Ted Laderas
bibliography: notes.bib
csl: test.csl
---
```

Once we have that set up we can just run pandoc using the following command:

```
pandoc --filter pandoc-citeproc notes.md -o notes.docx
```

## Rmarkdown and Pandoc

The easiest way to make this work is to alter the YAML for your .Rmd document with the same `bibliography` and `csl` entries. More info here: http://rmarkdown.rstudio.com/authoring_bibliographies_and_citations.html

## For more help

  - Zotero: https://www.zotero.org
  - Better BibTex Installation: https://github.com/retorquere/zotero-better-bibtex/wiki/Installation
  - This page helped me set up Zotero to work with pandoc: http://verifyandrepair.com/04-13-2016/citations-export-preview/
  - This is a page for Citation Style Language (CSL) files: https://www.zotero.org/styles
  - Markdown for Manuscripts: https://github.com/djhocking/Markdown-for-Manuscripts

References
=============